
<div class="jumbotron">
	<h2>Validation Results</h2>
	<span>Below is the detailed info of the validation results of the <strong>Kaltura API response</strong> vs <strong>XML Specification</strong> provided to the system :</span>
</div>

<div>
	<div class="col-sm-3">
		<span><strong>Spec Type: </strong>  {{specType}}</span>
	</div>

	<div ng-if="resultType === 'INGEST' && specType === 'VOD'" class="col-sm-3">
		<span><strong>Asset Type: </strong>  {{vodAssetType}}</span>
	</div>

	<div id="search-group" class="input-group col-sm-4 pull-right">
		<input id="searchField" type="text" class="form-control" placeholder="Search for..." ng-model="searchField">
		<span class="input-group-btn">
			<button class="btn btn-default" type="button" ng-click="focusOnSearchField()">
				<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
			</button>
		</span>
	</div>
</div>

<table ng-if="resultType === 'API'" class="table table-hover">
	<thead>
	  <tr>
	    <th>API Field</th>
	    <th>Correspondent in Spec</th>
	    <th>Type</th>
	    <th>Status</th>
	  </tr>
	</thead>
	<tbody>
	  <tr ng-repeat="result in validationResults | orderBy:'+type' | filter:searchField">
	  	<td>{{result.field}}</td>
	  	<td>{{result.specField}}</td>
	  	<td>{{result.type}}</td>
	    <td class="col-sm-2"><button class="btn btn-sm btn-block status-indicator" ng-class="fieldStatusClass(result.status)">{{result.status}}</button></td>
	  </tr>
	</tbody>
</table>

<div ng-if="resultType === 'INGEST' && specType === 'VOD'" class="asset-class-group">
	<div ng-repeat="(assetClass, resultsArray) in validationResults">
		<div class="table-container" ng-if="assetClass !== 'type'">
			<h3 class="asset-class">{{assetClass}}</h3>
			<pre id="missing-notification" ng-if="isResultsArrayEmpty(resultsArray)"> <strong> This Asset Class is not present in the ingest file.</strong></pre>
			<table ng-if="!isResultsArrayEmpty(resultsArray)" class="table table-hover">
				<thead>
				  <tr>
				    <th>Ingest Field</th>
				    <th>Type</th>
				    <th>Status</th>
				  </tr>
				</thead>
				<tbody>
				  <tr ng-repeat="result in resultsArray | orderBy:'+type' | filter:searchField">
				  	<td>{{result.field}}</td>
				  	<td>{{result.type}}</td>
				    <td class="col-sm-2"><button class="btn btn-sm btn-block status-indicator" ng-class="fieldStatusClass(result.status)">{{result.status}}</button></td>
				  </tr>
				</tbody>
			</table>
		</div>
	</div>
</div>

<div ng-if="resultType === 'INGEST' && specType === 'EPG'" class="asset-class-group">
	<div ng-repeat="(eventTitle, resultsArray) in validationResults">
		<div class="table-container" ng-if="eventTitle !== 'type'">
			<h3 class="event-title">{{eventTitle}}</h3>
			<pre id="missing-notification" ng-if="isResultsArrayEmpty(resultsArray)"> <strong> This Asset Class is not present in the ingest file.</strong></pre>
			<table ng-if="!isResultsArrayEmpty(resultsArray)" class="table table-hover">
				<thead>
				  <tr>
				    <th>Ingest Field</th>
				    <th>Status</th>
				  </tr>
				</thead>
				<tbody>
				  <tr ng-repeat="result in resultsArray | orderBy:'+field' | filter:searchField">
				  	<td>{{result.field}}</td>
				    <td class="col-sm-2"><button class="btn btn-sm btn-block status-indicator" ng-class="fieldStatusClass(result.status)">{{result.status}}</button></td>
				  </tr>
				</tbody>
			</table>
		</div>
	</div>
</div>